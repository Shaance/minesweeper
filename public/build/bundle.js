var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function c(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(n,e,r){n.$$.on_destroy.push(function(n,...e){if(null==n)return t;const r=n.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}(e,r))}function s(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function l(t){t.parentNode.removeChild(t)}function a(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function g(){return d(" ")}function $(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function m(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function p(t,n,e,r){t.style.setProperty(n,e,r?"important":"")}function b(t,n){for(let e=0;e<t.options.length;e+=1){const r=t.options[e];if(r.__value===n)return void(r.selected=!0)}}let v;function y(t){v=t}const x=[],E=[],w=[],A=[],I=Promise.resolve();let N=!1;function M(t){w.push(t)}let L=!1;const _=new Set;function S(){if(!L){L=!0;do{for(let t=0;t<x.length;t+=1){const n=x[t];y(n),O(n.$$)}for(y(null),x.length=0;E.length;)E.pop()();for(let t=0;t<w.length;t+=1){const n=w[t];_.has(n)||(_.add(n),n())}w.length=0}while(x.length);for(;A.length;)A.pop()();N=!1,L=!1,_.clear()}}function O(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(M)}}const T=new Set;function k(t,n){t&&t.i&&(T.delete(t),t.i(n))}function Y(t,n,e,r){if(t&&t.o){if(T.has(t))return;T.add(t),undefined.c.push((()=>{T.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}}function B(t){t&&t.c()}function z(t,e,c){const{fragment:i,on_mount:s,on_destroy:u,after_update:l}=t.$$;i&&i.m(e,c),M((()=>{const e=s.map(n).filter(o);u?u.push(...e):r(e),t.$$.on_mount=[]})),l.forEach(M)}function P(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function F(t,n){-1===t.$$.dirty[0]&&(x.push(t),N||(N=!0,I.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function D(n,o,c,i,s,u,a=[-1]){const f=v;y(n);const d=o.props||{},g=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:e(),dirty:a,skip_bound:!1};let $=!1;if(g.ctx=c?c(n,d,((t,e,...r)=>{const o=r.length?r[0]:e;return g.ctx&&s(g.ctx[t],g.ctx[t]=o)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](o),$&&F(n,t)),e})):[],g.update(),$=!0,r(g.before_update),g.fragment=!!i&&i(g.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);g.fragment&&g.fragment.l(t),t.forEach(l)}else g.fragment&&g.fragment.c();o.intro&&k(n.$$.fragment),z(n,o.target,o.anchor),S()}y(f)}class G{$destroy(){P(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var R;!function(t){t.INITIAL="INITIAL",t.PLAYING="PLAYING",t.WON="WON",t.LOST="LOST"}(R||(R={}));var C,H=R;!function(t){t.EASY="EASY",t.MEDIUM="MEDIUM",t.HARD="HARD",t.CUSTOM="CUSTOM"}(C||(C={}));var U=C;function V(t,n){let e=0,r=0;const o=[];for(;e!==t;){for(o.push([]);r!==t;)n(o,e),r+=1;r=0,e+=1}return o}function j(t,n,e){return t>=0&&n>=0&&t<e.length&&n<e[t].length}function q(t,n=!1){return V(t,((t,e)=>t[e].push(n)))}function W(t){return t===H.INITIAL||t===H.PLAYING}var J;!function(t){t.REVEAL="REVEAL",t.FLAG="FLAG"}(J||(J={}));var K,Q=J;!function(t){t[t.BOMB=-1]="BOMB",t[t.EMPTY=0]="EMPTY"}(K||(K={}));var X=K;class Z{constructor(t,n,e){const r=t>0?t:8,o=n>0?n:10;this.content=function(t,n){const e=function(t,n){const e=new Set;for(;e.size!==n;){const n=tt(t);e.add(`${String(n[0])}-${String(n[1])}`)}const r=Array.from(e).map((t=>{const n=t.split("-");return[Number(n[0]),Number(n[1])]}));return new Set(r)}(t,n);return function(t,n){const e=t,r=[[0,1],[1,0],[0,-1],[-1,0],[1,1],[-1,-1],[1,-1],[-1,1]];return n.forEach((t=>{const[n,o]=[t[0],t[1]];r.forEach((t=>{const r=n+t[0],c=o+t[1];j(r,c,e)&&e[r][c]!==X.BOMB&&(e[r][c]+=1)}))})),e}(function(t,n){const e=t;return n.forEach((t=>{const[n,r]=[t[0],t[1]];e[n][r]=X.BOMB})),e}(function(t,n){return V(t,((t,e)=>t[e].push(n)))}(t,0),e),e)}(r,o),this.visited=q(r),this.flagged=q(r),this.size=r,this.level=e,this.bombsNumber=o,this.state=H.INITIAL,this.remainingNotVisited=t*t-n,this.availableFlags=o}withFlagged(t){return this.flagged=t,this}withState(t){return this.state=t,this}}function tt(t){return[nt(0,t),nt(0,t)]}function nt(t,n){return Math.floor(Math.random()*(n-t)+t)}function et(t,n,e){const r=function(t,n,e){if(!t||t===U.EASY)return{size:8,bombsNumber:10};if(t===U.CUSTOM){const t=n>0?n:8;return{size:t,bombsNumber:e>0&&e<t?e:10}}return t===U.MEDIUM?{size:10,bombsNumber:16}:{size:12,bombsNumber:25}}(t,n,e);return new Z(r.size,r.bombsNumber,t)}function rt(t,n,e,r){return t===Q.REVEAL?function(t,n,e){if(!j(n,e,t.content))return t;if(t.visited[n][e]||t.flagged[n][e]||!W(t.state))return t;if(t.content[n][e]===X.BOMB)return function(t){const n=t;return n.content.forEach(((t,e)=>{t.forEach(((t,r)=>{t===X.BOMB&&(n.visited[e][r]=!0)}))})),n}(t).withState(H.LOST);const r=function(t,n,e){const r=t,o=[[0,1],[1,0],[0,-1],[-1,0]],{content:c,visited:i}=r,s=[[n,e]];let u=0;for(;s.length>0;){const[t,n]=s.pop();ct(r,t,n)&&(i[t][n]=!0,u+=1,c[t][n]===X.EMPTY&&o.forEach((e=>{s.push([t+e[0],n+e[1]])})))}return r.remainingNotVisited-=u,r}(t,n,e);0===r.remainingNotVisited&&(r.state=H.WON);r.state===H.INITIAL&&(r.state=H.PLAYING);return r}(ot(n,e,r),e,r):function(t,n,e){if(!j(n,e,t.content)||t.visited[n][e])return t;if(!t.flagged[n][e]&&0===t.availableFlags)return t;const r=t;r.flagged[n][e]=!r.flagged[n][e],r.flagged[n][e]?r.availableFlags-=1:r.availableFlags+=1;return r}(n,e,r)}function ot(t,n,e){if(t.state!==H.INITIAL||!j(n,e,t.content)||function(t,n,e){return j(n,e,t.content)&&t.content[n][e]===X.EMPTY}(t,n,e))return t;return ot(et(t.level,t.size,t.bombsNumber).withFlagged(t.flagged),n,e)}function ct(t,n,e){const{content:r,visited:o,flagged:c}=t;return j(n,e,r)&&!o[n][e]&&!c[n][e]}const it=[];const st=function(n,e=t){let r;const o=[];function i(t){if(c(n,t)&&(n=t,r)){const t=!it.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),it.push(e,n)}if(t){for(let t=0;t<it.length;t+=2)it[t][0](it[t+1]);it.length=0}}}return{set:i,update:function(t){i(t(n))},subscribe:function(c,s=t){const u=[c,s];return o.push(u),1===o.length&&(r=e(i)||t),c(n),()=>{const t=o.indexOf(u);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}(et(U.EASY));function ut(t,n,e){const r=t.slice();return r[13]=n[e],r[15]=e,r}function lt(t,n,e){const r=t.slice();return r[16]=n[e],r[18]=e,r}function at(t){let n,e,o,c,i,a,p,b,v=t[9](t[1],t[2],t[15],t[18])+"";function y(){return t[11](t[15],t[18])}function x(){return t[12](t[15],t[18])}return{c(){n=f("div"),e=f("button"),o=d(v),a=g(),h(e,"class","cell-button svelte-1yop23t"),e.disabled=c=t[8](t[1],t[4],t[15],t[18]),h(e,"style",i="background-color:"+t[6](t[1],t[15],t[18])+";\n              color:"+ht(t[16])+";\n              "+t[7](t[1],t[2],t[4],t[15],t[18])),h(n,"class","column svelte-1yop23t")},m(t,r){var c;u(t,n,r),s(n,e),s(e,o),s(n,a),p||(b=[$(e,"click",y),$(e,"contextmenu",(c=x,function(t){return t.preventDefault(),c.call(this,t)}))],p=!0)},p(n,r){t=n,6&r&&v!==(v=t[9](t[1],t[2],t[15],t[18])+"")&&m(o,v),18&r&&c!==(c=t[8](t[1],t[4],t[15],t[18]))&&(e.disabled=c),23&r&&i!==(i="background-color:"+t[6](t[1],t[15],t[18])+";\n              color:"+ht(t[16])+";\n              "+t[7](t[1],t[2],t[4],t[15],t[18]))&&h(e,"style",i)},d(t){t&&l(n),p=!1,r(b)}}}function ft(t){let n,e=t[13],r=[];for(let n=0;n<e.length;n+=1)r[n]=at(lt(t,e,n));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();n=d("")},m(t,e){for(let n=0;n<r.length;n+=1)r[n].m(t,e);u(t,n,e)},p(t,o){if(1015&o){let c;for(e=t[13],c=0;c<e.length;c+=1){const i=lt(t,e,c);r[c]?r[c].p(i,o):(r[c]=at(i),r[c].c(),r[c].m(n.parentNode,n))}for(;c<r.length;c+=1)r[c].d(1);r.length=e.length}},d(t){a(r,t),t&&l(n)}}}function dt(n){let e,r,o=n[0],c=[];for(let t=0;t<o.length;t+=1)c[t]=ft(ut(n,o,t));return{c(){e=f("main"),r=f("div");for(let t=0;t<c.length;t+=1)c[t].c();h(r,"id","board"),h(r,"data-cy","board"),h(r,"class","grid svelte-1yop23t"),p(r,"width",gt+"px"),p(r,"grid-template-columns",$t(n[3],gt/n[3],"px")),p(r,"grid-template-rows",$t(n[3],gt/n[3],"px"))},m(t,n){u(t,e,n),s(e,r);for(let t=0;t<c.length;t+=1)c[t].m(r,null)},p(t,[n]){if(1015&n){let e;for(o=t[0],e=0;e<o.length;e+=1){const i=ut(t,o,e);c[e]?c[e].p(i,n):(c[e]=ft(i),c[e].c(),c[e].m(r,null))}for(;e<c.length;e+=1)c[e].d(1);c.length=o.length}8&n&&p(r,"grid-template-columns",$t(t[3],gt/t[3],"px")),8&n&&p(r,"grid-template-rows",$t(t[3],gt/t[3],"px"))},i:t,o:t,d(t){t&&l(e),a(c,t)}}}const gt=375;function $t(t,n,e){if(t<0)return;let r="",o=0;for(;o!==t;)r+=`${n}${e} `,o++;return r}function ht(t){switch(t){case 1:return"blue";case 2:return"green";case 3:return"red";case 4:return"purple";case 5:return"maroon";case 6:return"turquoise";case 7:return"black";case 8:return"grey"}}function mt(t,n,e){let r,o,c,s,u,l;function a(t,n,e){st.set(rt(t,l,n,e))}function f(t,n,e,r){return t[e][r]||!W(n)}i(t,st,(t=>e(10,l=t)));return t.$$.update=()=>{1024&t.$$.dirty&&e(0,r=l.content),1024&t.$$.dirty&&e(1,o=l.visited),1024&t.$$.dirty&&e(2,c=l.flagged),1024&t.$$.dirty&&e(3,s=l.size),1024&t.$$.dirty&&e(4,u=l.state)},[r,o,c,s,u,a,function(t,n,e){const r=(n+e)%2==0;return t[n][e]?r?"#d4c18e":"#cfbb86":r?"#9cd14f":"#95c74c"},function(t,n,e,r,o){return f(t,e,r,o)||n[r][o]?"":"cursor: pointer;"},f,function(t,n,e,o){const c=r[e][o];return t[e][o]&&c!==X.EMPTY?c===X.BOMB?"💣":c:n[e][o]?"⛳️":""},l,(t,n)=>a(Q.REVEAL,t,n),(t,n)=>a(Q.FLAG,t,n)]}class pt extends G{constructor(t){super(),D(this,t,mt,dt,c,{})}}function bt(t,n,e){const r=t.slice();return r[4]=n[e],r}function vt(n){let e,r,o,c=n[4].text+"";return{c(){e=f("option"),r=d(c),o=g(),e.__value=n[4],e.value=e.__value},m(t,n){u(t,e,n),s(e,r),s(e,o)},p:t,d(t){t&&l(e)}}}function yt(n){let e,o,c,i,d=n[1],g=[];for(let t=0;t<d.length;t+=1)g[t]=vt(bt(n,d,t));return{c(){e=f("main"),o=f("select");for(let t=0;t<g.length;t+=1)g[t].c();h(o,"id","level-picker"),h(o,"data-cy","level-picker"),h(o,"class","svelte-1gijwun"),void 0===n[0]&&M((()=>n[3].call(o))),h(e,"class","svelte-1gijwun")},m(t,r){u(t,e,r),s(e,o);for(let t=0;t<g.length;t+=1)g[t].m(o,null);b(o,n[0]),c||(i=[$(o,"change",n[3]),$(o,"change",n[2])],c=!0)},p(t,[n]){if(2&n){let e;for(d=t[1],e=0;e<d.length;e+=1){const r=bt(t,d,e);g[e]?g[e].p(r,n):(g[e]=vt(r),g[e].c(),g[e].m(o,null))}for(;e<g.length;e+=1)g[e].d(1);g.length=d.length}3&n&&b(o,t[0])},i:t,o:t,d(t){t&&l(e),a(g,t),c=!1,r(i)}}}function xt(t,n,e){let r,o=[{id:U.EASY,text:"Easy"},{id:U.MEDIUM,text:"Medium"},{id:U.HARD,text:"Hard"}];return[r,o,function(){st.set(et(r.id))},function(){r=function(t){const n=t.querySelector(":checked")||t.options[0];return n&&n.__value}(this),e(0,r),e(1,o)}]}class Et extends G{constructor(t){super(),D(this,t,xt,yt,c,{})}}function wt(n){let e,r,o,c,i;return{c(){e=f("main"),r=f("button"),o=d(n[0]),h(r,"id","reset-btn"),h(r,"data-cy","reset-btn"),h(r,"class","reset-btn svelte-isilkn"),h(e,"class","svelte-isilkn")},m(t,l){u(t,e,l),s(e,r),s(r,o),c||(i=$(r,"click",n[1]),c=!0)},p(t,[n]){1&n&&m(o,t[0])},i:t,o:t,d(t){t&&l(e),c=!1,i()}}}function At(t,n,e){let r,o,c,s,u,l;return i(t,st,(t=>e(2,l=t))),t.$$.update=()=>{4&t.$$.dirty&&(r=l.level),4&t.$$.dirty&&(o=l.size),4&t.$$.dirty&&e(3,c=l.state),4&t.$$.dirty&&(s=l.bombsNumber),8&t.$$.dirty&&e(0,u=W(c)?"Reset":"Play again")},[u,function(){st.set(et(r,o,s))},l,c]}class It extends G{constructor(t){super(),D(this,t,At,wt,c,{})}}function Nt(n){let e,r,o,c=n[0].availableFlags+"";return{c(){e=f("main"),r=d("⛳️  "),o=d(c),h(e,"data-cy","remaining-flags"),h(e,"id","remaining-flags"),h(e,"class","svelte-1s0x51y")},m(t,n){u(t,e,n),s(e,r),s(e,o)},p(t,[n]){1&n&&c!==(c=t[0].availableFlags+"")&&m(o,c)},i:t,o:t,d(t){t&&l(e)}}}function Mt(t,n,e){let r;return i(t,st,(t=>e(0,r=t))),[r]}class Lt extends G{constructor(t){super(),D(this,t,Mt,Nt,c,{})}}function _t(n){let e,r,o;return{c(){e=f("main"),r=d("⏳  "),o=d(n[0]),h(e,"id","timer"),h(e,"data-cy","timer"),h(e,"class","svelte-1ublb4p")},m(t,n){u(t,e,n),s(e,r),s(e,o)},p(t,[n]){1&n&&m(o,t[0])},i:t,o:t,d(t){t&&l(e)}}}function St(t,n,e){let r,o,c,s;i(t,st,(t=>e(5,c=t)));let u,l=0;return t.$$.update=()=>{32&t.$$.dirty&&e(4,r=c.state),26&t.$$.dirty&&(r===H.PLAYING?(e(3,u=new Date),e(2,l=0),s&&clearInterval(s),e(1,s=setInterval((()=>{e(2,l=Math.round(((new Date).valueOf()-u.valueOf())/1e3))}),1e3))):W(r)||e(1,s=clearInterval(s))),20&t.$$.dirty&&e(0,o=function(t,n){let e=t;return n===H.INITIAL&&(e=0),e>999&&(e=999),e.toString().padStart(3,"0")}(l,r))},[o,s,l,u,r,c]}class Ot extends G{constructor(t){super(),D(this,t,St,_t,c,{})}}function Tt(n){let e,r,o,c,i,a,d,$,m;return r=new Lt({}),c=new Ot({}),a=new Et({}),$=new It({}),{c(){e=f("main"),B(r.$$.fragment),o=g(),B(c.$$.fragment),i=g(),B(a.$$.fragment),d=g(),B($.$$.fragment),h(e,"class","svelte-pzp026")},m(t,n){u(t,e,n),z(r,e,null),s(e,o),z(c,e,null),s(e,i),z(a,e,null),s(e,d),z($,e,null),m=!0},p:t,i(t){m||(k(r.$$.fragment,t),k(c.$$.fragment,t),k(a.$$.fragment,t),k($.$$.fragment,t),m=!0)},o(t){Y(r.$$.fragment,t),Y(c.$$.fragment,t),Y(a.$$.fragment,t),Y($.$$.fragment,t),m=!1},d(t){t&&l(e),P(r),P(c),P(a),P($)}}}class kt extends G{constructor(t){super(),D(this,t,null,Tt,c,{})}}function Yt(n){let e;return{c(){e=f("main"),e.innerHTML='<h3 data-cy="commands-txt" class="svelte-1d82f3z">Left click to reveal cell content or right click to flag / unflag</h3>',h(e,"class","svelte-1d82f3z")},m(t,n){u(t,e,n)},p:t,i:t,o:t,d(t){t&&l(e)}}}class Bt extends G{constructor(t){super(),D(this,t,null,Yt,c,{})}}function zt(n){let e,r,o;return{c(){e=f("main"),r=f("h2"),o=d(n[0]),h(r,"id","state-text"),h(r,"data-cy","state-text"),h(r,"class","svelte-bpnciz")},m(t,n){u(t,e,n),s(e,r),s(r,o)},p(t,[n]){1&n&&m(o,t[0])},i:t,o:t,d(t){t&&l(e)}}}function Pt(t,n,e){let r,o,c;return i(t,st,(t=>e(2,c=t))),t.$$.update=()=>{var n;4&t.$$.dirty&&e(1,r=c.state),2&t.$$.dirty&&e(0,o=(n=r)===H.WON?"You won! 🙌":n===H.LOST?"You lost.. 😫":"Avoid the 💣💥")},[o,r,c]}class Ft extends G{constructor(t){super(),D(this,t,Pt,zt,c,{})}}function Dt(n){let e;return{c(){e=f("footer"),e.innerHTML='<p>Check out the code on <a href="https://github.com/Shaance/minesweeper">GitHub</a></p>',h(e,"data-cy","footer")},m(t,n){u(t,e,n)},p:t,i:t,o:t,d(t){t&&l(e)}}}class Gt extends G{constructor(t){super(),D(this,t,null,Dt,c,{})}}function Rt(n){let e,r,o,c,i,a,d,$,m,p,b,v,y,x,E,w;return c=new Ft({}),a=new kt({}),b=new pt({}),y=new Bt({}),E=new Gt({}),{c(){e=f("main"),r=f("h1"),r.textContent="MineSweeper",o=g(),B(c.$$.fragment),i=g(),B(a.$$.fragment),d=g(),$=f("br"),m=f("br"),p=g(),B(b.$$.fragment),v=g(),B(y.$$.fragment),x=g(),B(E.$$.fragment),h(r,"id","title"),h(r,"data-cy","title"),h(r,"class","svelte-1oo2qga"),h(e,"class","svelte-1oo2qga")},m(t,n){u(t,e,n),s(e,r),s(e,o),z(c,e,null),s(e,i),z(a,e,null),s(e,d),s(e,$),s(e,m),s(e,p),z(b,e,null),s(e,v),z(y,e,null),s(e,x),z(E,e,null),w=!0},p:t,i(t){w||(k(c.$$.fragment,t),k(a.$$.fragment,t),k(b.$$.fragment,t),k(y.$$.fragment,t),k(E.$$.fragment,t),w=!0)},o(t){Y(c.$$.fragment,t),Y(a.$$.fragment,t),Y(b.$$.fragment,t),Y(y.$$.fragment,t),Y(E.$$.fragment,t),w=!1},d(t){t&&l(e),P(c),P(a),P(b),P(y),P(E)}}}return new class extends G{constructor(t){super(),D(this,t,null,Rt,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
